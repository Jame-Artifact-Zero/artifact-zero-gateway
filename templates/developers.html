{% extends "base.html" %}
{% block title %}Developer Access â€” Artifact Zero{% endblock %}
{% block body_class %}page-developers{% endblock %}

{% block head %}
<style>
.az-dev-wrap{max-width:520px;margin:0 auto;padding:100px 20px 60px;min-height:80vh;display:flex;flex-direction:column;justify-content:center}
.az-dev-wrap h1{font-family:var(--az-mono);font-size:22px;font-weight:700;margin-bottom:6px}
.az-dev-sub{color:var(--muted);font-size:14px;margin-bottom:32px;line-height:1.5}
.az-dev-field{margin-bottom:20px}
.az-dev-field label{display:block;font-family:var(--az-mono);font-size:11px;color:var(--muted);text-transform:uppercase;letter-spacing:1.5px;margin-bottom:6px}
.az-dev-field input,.az-dev-field textarea{width:100%;background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:12px 14px;color:var(--text);font-size:14px;font-family:var(--az-sans);outline:none;transition:border-color .2s}
.az-dev-field input:focus,.az-dev-field textarea:focus{border-color:var(--accent)}
.az-dev-field textarea{min-height:100px;resize:vertical}
.az-dev-field input::placeholder,.az-dev-field textarea::placeholder{color:#4b5563}
.az-dev-btn{width:100%;padding:14px;background:var(--accent);color:#000;font-family:var(--az-mono);font-size:14px;font-weight:700;border:none;border-radius:8px;cursor:pointer;letter-spacing:1px;transition:opacity .2s}
.az-dev-btn:hover{opacity:.9}
.az-dev-btn:disabled{opacity:.4;cursor:default}
.az-dev-err{color:var(--red);font-size:12px;margin-top:4px;font-family:var(--az-mono)}
.az-dev-success h1{color:var(--accent)}
.az-dev-success p{margin-top:12px}
.az-dev-success a{color:var(--accent);font-family:var(--az-mono);font-size:13px;margin-top:20px;display:inline-block;text-decoration:none}
.az-dev-success a:hover{text-decoration:underline}
</style>
{% endblock %}

{% block content %}
<div class="az-dev-wrap" id="formWrap">
  <h1>Developer & Vendor Access</h1>
  <p class="az-dev-sub">NTI infrastructure is available to approved developers and integration partners. Tell us what you're building.</p>
  <div class="az-dev-field">
    <label>Name</label>
    <input type="text" id="dName" placeholder="First and last name" required>
  </div>
  <div class="az-dev-field">
    <label>Email</label>
    <input type="email" id="dEmail" placeholder="you@company.com" required>
  </div>
  <div class="az-dev-field">
    <label>What are you building?</label>
    <textarea id="dMessage" placeholder="Tell us about your integration, product, or use case."></textarea>
  </div>
  <button class="az-dev-btn" id="sendBtn" onclick="submitDev()">Request access</button>
  <div class="az-dev-err" id="errMsg"></div>
</div>
{% endblock %}

{% block scripts %}
<script>
async function submitDev(){
  var name=document.getElementById('dName').value.trim();
  var email=document.getElementById('dEmail').value.trim();
  var message=document.getElementById('dMessage').value.trim();
  var err=document.getElementById('errMsg');
  err.textContent='';
  if(!name||name.split(' ').length<2){err.textContent='First and last name required.';return}
  if(!email||!email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)){err.textContent='Valid email required.';return}
  if(!message||message.length<10){err.textContent='Tell us what you are building.';return}
  var btn=document.getElementById('sendBtn');
  btn.disabled=true;btn.textContent='Sending...';
  try{
    var r=await fetch('/api/developer-apply',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:name,email:email,message:message,type:'developer_apply'})});
    if(r.ok){
      document.getElementById('formWrap').className='az-dev-wrap az-dev-success';
      document.getElementById('formWrap').innerHTML='<h1>Got it.</h1><p class="az-dev-sub">We will review your request and get back to you. Check your email.</p><a href="/">&larr; Back to Artifact Zero</a>';
    }else{
      var d=await r.json().catch(function(){return{}});
      err.textContent=d.error||'Something went wrong. Try again.';
      btn.disabled=false;btn.textContent='Request access';
    }
  }catch(e){err.textContent='Network error. Try again.';btn.disabled=false;btn.textContent='Request access'}
}
</script>
{% endblock %}
